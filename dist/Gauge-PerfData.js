define(["snmd-core/SVGWidget","snmd-core/SVGImpl/Gauge","js-logger"],function(t,s,e){"use strict";var a=function(e,a,i){this.opts={axis:[{max:50,scale:"linear"}],stroke:"yellow",fill:"white",desc:i,dpi:.2,cls:t.srClassOpts(i,"Gauge")},this.desc=i,"undefined"==typeof this.desc.uom?this.opts.uom="":this.opts.uom=this.desc.uom,"undefined"==typeof i.keys?this.opts.keys=[i.key]:this.opts.keys=i.keys,"undefined"!=typeof i.factor?this.opts.factor=i.factor:this.opts.factor=1,this.last=[];var o;for(o=0;o<i.topics.length;o++)this.last[i.topics[o]]=[];this.max="undefined"==typeof i.max?100:i.max,this.chart=new s(e,a,this.opts)};return a.prototype.handleUpdate=function(t,s){var a;try{a=JSON.parse(s)}catch(t){return void e.debug("[Nagios/Gauge-PerfData] JSON error in performance data: "+t.message)}this.last[t].val=0,this.last[t].state=0;try{var i;for(i=0;i<this.opts.keys.length;i++)"undefined"!=typeof a.perf_data[this.opts.keys[i]]&&(this.last[t].val+=parseFloat(a.perf_data[this.opts.keys[i]].val));this.last[t].state=a.state}catch(t){e.debug("[Nagios/Gauge-PerfData] Error processing performance data: "+t.message)}var o,r=0,h=0;for(o in this.last){var p=parseFloat(this.last[o].val);isNaN(p)&&(p=0),r+=p,h=Math.max(h,this.last[o].state)}this.chart.update(r*this.opts.factor,this.max,h)},a});
//# sourceMappingURL=dist/Gauge-PerfData.map