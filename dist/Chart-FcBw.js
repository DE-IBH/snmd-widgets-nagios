define(["snmd-core/SVGWidget","snmd-core/SVGImpl/Chart","js-logger"],function(s,t,a){"use strict";var i=function(a,i,e){this.opts={axis:[{max:1e8,scale:"linear"}],desc:e,dpi:.2,cls:s.srClassOpts(e,"Chart"),lcls:["snmd-lcl-Nag","snmd-lcl-NagFc","snmd-lcl-NagFcBw"],mcls:["snmd-mcl-Nag","snmd-mcl-NagFc","snmd-mcl-NagFcBw"],tcls:["snmd-tcl-Nag","snmd-tcl-NagFc","snmd-tcl-NagFcBw"]};var l,r=0;for(l=0;l<e.topics.length;l++)r+=this.opts.axis[0].max;if(this.opts.axis[0].max=r,"undefined"!=typeof e.max){var n=parseFloat(e.max);isNaN(n)||(this.opts.axis[0].max=n)}for(this.lines=[{name:"in",axis:0,unit:"B"},{name:"out",axis:0,unit:"B"}],this.desc=e,this.last=[],l=0;l<e.topics.length;l++){this.last[e.topics[l]]=[];var c;for(c=0;c<this.lines.length;c++)this.last[e.topics[l]][c]=[]}this.chart=new t(a,i,this.opts,this.lines)};return i.prototype.handleUpdate=function(s,t){var i;try{i=JSON.parse(t)}catch(s){return void a.debug("[Nagios/Chart-FcBw] JSON error in performance data: "+s.message)}var e;for(e=0;e<this.lines.length;e++){this.last[s][e].val=0,this.last[s][e].state=0;try{this.last[s][e].val=i.perf_data[this.lines[e].name].val,this.last[s][e].state=i.state}catch(t){a.debug("[Nagios/Chart-FcBw] Error processing performance data of ["+s+"].line["+e+"]: "+t.message)}}var l=[],r=0;for(e=0;e<this.lines.length;e++){l[e]=0;var n;for(n in this.last){var c=parseFloat(this.last[n][e].val);isNaN(c)&&(c=0),l[e]+=c,r=Math.max(r,this.last[n][e].state)}}this.chart.update(i._timestamp,l,r)},i});
//# sourceMappingURL=dist/Chart-FcBw.map