define(["snmd-core/SVGWidget","snmd-core/SVGImpl/Transform","js-logger"],function(t,s,a){"use strict";var o=function(a,o,r){this.opts={desc:r,cls:t.srClassOpts(r,"Transform")},this.desc=r,"undefined"==typeof this.desc.transform?this.opts.transform="scale(%)":this.opts.transform=this.desc.transform,"undefined"==typeof r.keys?this.opts.keys=[r.key]:this.opts.keys=r.keys,"undefined"==typeof r.factors?this.opts.factors=[]:this.opts.factors=r.factors,"undefined"!=typeof r.factor?(this.opts.factor=parseFloat(r.factor),isNaN(this.opts.factor)&&(this.opts.factor=1)):this.opts.factor=1,"undefined"!=typeof r.max?(this.opts.max=parseFloat(r.max),isNaN(this.opts.max)&&(this.opts.max=100)):this.opts.max=100,this.last=[],this.factors=[];var e;for(e=0;e<r.topics.length;e++)this.last[r.topics[e]]=[],"undefined"==typeof this.opts.factors[e]?this.factors[r.topics[e]]=this.opts.factor:this.factors[r.topics[e]]=this.opts.factors[e];this.chart=new s(a,o,this.opts)};return o.prototype.handleUpdate=function(t,s){var o;try{o=JSON.parse(s)}catch(t){return void a.debug("[Nagios/Transform-PerfData] JSON error in performance data: "+t.message)}this.last[t].val=0;try{var r;for(r=0;r<this.opts.keys.length;r++)"undefined"!=typeof o.perf_data[this.opts.keys[r]]&&(this.last[t].val+=parseFloat(o.perf_data[this.opts.keys[r]].val)*this.factors[t])}catch(s){a.debug("[Nagios/Transform-PerfData] Error processing performance data ["+t+"]: "+s.message)}try{this.last[t].state=o.state}catch(s){a.debug("[Nagios/Transform-PerfData] Error processing state data ["+t+"]: "+s.message)}var e,i=0,f=0;for(e in this.last){var p=parseFloat(this.last[e].val);isNaN(p)&&(p=0),i+=p,f=Math.max(f,this.last[e].state)}this.chart.update(i,f)},o});
//# sourceMappingURL=dist/Transform-PerfData.map