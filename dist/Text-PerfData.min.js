define(["snmd-core/SVGWidget","snmd-core/SVGImpl/Text"],function(t,s){"use strict";var o=function(o,e,a){this.opts={desc:a,cls:t.srClassOpts(a,"Text")},this.desc=a,"undefined"==typeof this.desc.uom?this.opts.uom="":this.opts.uom=this.desc.uom,"undefined"==typeof a.keys?this.opts.keys=[a.key]:this.opts.keys=a.keys,"undefined"==typeof a.factors?this.opts.factors=[]:this.opts.factors=a.factors,"undefined"!=typeof a.factor?(this.opts.factor=parseFloat(a.factor),isNaN(this.opts.factor)&&(this.opts.factor=1)):this.opts.factor=1,"undefined"!=typeof a.fracts&&(this.opts.fracts=a.fracts),this.last=[],this.factors=[];var r;for(r=0;r<a.topics.length;r++)this.last[a.topics[r]]=[],"undefined"==typeof this.opts.factors[r]?this.factors[a.topics[r]]=this.opts.factor:this.factors[a.topics[r]]=this.opts.factors[r];this.chart=new s(o,e,this.opts)};return o.prototype.handleUpdate=function(t,s){var o;try{o=JSON.parse(s)}catch(t){return void console.error("JSON error in performance data: "+t.message)}this.last[t].val=0;try{var e;for(e=0;e<this.opts.keys.length;e++)"undefined"!=typeof o.perf_data[this.opts.keys[e]]&&(this.last[t].val+=parseFloat(o.perf_data[this.opts.keys[e]].val)*this.factors[t])}catch(s){console.err("Error to process performance data ["+t+"]: "+s.message)}try{this.last[t].state=o.state}catch(s){console.err("Error to process state data ["+t+"]: "+s.message)}var a,r=0,i=0;for(a in this.last){var c=parseFloat(this.last[a].val);isNaN(c)&&(c=0),r+=c,i=Math.max(i,this.last[a].state)}this.chart.update(r,i)},o});
//# sourceMappingURL=dist/Text-PerfData.min.map