define(["snmd-core/SVGWidget","snmd-core/MQTT"],function(t,s){"use strict";var e=function(e,a,i){this.opts={cls:t.srClassOpts(i,"Gradient"),range:i.range,hoffset:i.hoffset,hscale:i.hscale,coords:i.coords},"undefined"==typeof i.keys?this.opts.keys=[i.key]:this.opts.keys=i.keys,this.last={},this.states={},this.tmap={};var r;for(r in i.stops){this.last[r]={};var o;for(o=0;o<i.stops[r].length;o++){var h=i.stops[r][o];"undefined"==typeof this.tmap[h]&&(this.tmap[h]=[]),this.tmap[h].indexOf(r)===-1&&this.tmap[h].push(r),this.last[r][h]=void 0}}this.opts.stops=Object.keys(this.last),this.grad=new(t.srLookupImpl("Gradient"))(e,a,this.opts),this.tmap.forEach(function(t){s.srRegisterTopic(t,this)},this)};return e.prototype.handleUpdate=function(t,s){var e;try{e=JSON.parse(s)}catch(t){return void console.error("JSON error in performance data: "+t.message)}var a;for(a=0;a<this.tmap[t].length;a++)this.last[this.tmap[t][a]][t]=void 0;var i=0,r=!1;try{this.states[t]=e.state;for(a in this.opts.keys)if("undefined"!=typeof e.perf_data[this.opts.keys[a]]){i=parseFloat(e.perf_data[this.opts.keys[a]].val);break}for(a=0;a<this.tmap[t].length;a++)this.last[this.tmap[t][a]][t]!==i&&(this.last[this.tmap[t][a]][t]=i,r=!0)}catch(s){console.error("Error to process performance data ["+t+"]: "+s.message)}if(r!==!1){var o,h=0,p=[];for(o in this.last){i=0;var n=!0;for(var t in this.last[o]){var f=parseFloat(this.last[o][t]);isNaN(f)&&(f=0,n=!1),i+=f,h=Math.max(h,this.states[t])}i/=Object.keys(this.last[o]).length,i<this.opts.range[0]&&(i=this.opts.range[0]),i>this.opts.range[1]&&(i=this.opts.range[1]),p[o]=n?(this.opts.hoffset+(i-this.opts.range[0])*this.opts.hscale/(this.opts.range[1]-this.opts.range[0]))%360:void 0}this.grad.update(p,h)}},t.srRegisterWidget("NagGrdPerfData",e),e});
//# sourceMappingURL=dist/NagGrdPerfData.min.map