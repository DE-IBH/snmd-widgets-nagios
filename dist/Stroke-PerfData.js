define(["snmd-core/SVGWidget","snmd-core/SVGImpl/StrokeWidth","js-logger"],function(t,s,a){"use strict";var e=function(a,e,o){this.opts={desc:o,cls:t.srClassOpts(o,"StrokeWidth")},this.desc=o,"undefined"==typeof this.desc.width?this.opts.width=[1,32]:this.opts.width=this.desc.width,"undefined"==typeof o.keys?this.opts.keys=[o.key]:this.opts.keys=o.keys,"undefined"==typeof o.factors?this.opts.factors=[]:this.opts.factors=o.factors,"undefined"!=typeof o.factor?(this.opts.factor=parseFloat(o.factor),isNaN(this.opts.factor)&&(this.opts.factor=1)):this.opts.factor=1,"undefined"!=typeof o.max?(this.opts.max=parseFloat(o.max),isNaN(this.opts.max)&&(this.opts.max=100)):this.opts.max=100,"undefined"!=typeof o.scale?this.opts.scale=o.scale:this.opts.scale="linear",this.opts.abs=!1,"undefined"!=typeof o.abs&&o.abs&&(this.opts.abs=!0),this.last=[],this.factors=[];var i;for(i=0;i<o.topics.length;i++)this.last[o.topics[i]]=[],"undefined"==typeof this.opts.factors[i]?this.factors[o.topics[i]]=this.opts.factor:this.factors[o.topics[i]]=this.opts.factors[i];this.chart=new s(a,e,this.opts)};return e.prototype.handleUpdate=function(t,s){var e;try{e=JSON.parse(s)}catch(t){return void a.debug("[Nagios/Stroke-PerfData] JSON error in performance data: "+t.message)}this.last[t].val=0;try{var o;for(o=0;o<this.opts.keys.length;o++)"undefined"!=typeof e.perf_data[this.opts.keys[o]]&&(this.last[t].val+=parseFloat(e.perf_data[this.opts.keys[o]].val)*this.factors[t])}catch(s){a.debug("[Nagios/Stroke-PerfData] Error processing performance data ["+t+"]: "+s.message)}try{this.last[t].state=e.state}catch(s){a.debug("[Nagios/Stroke-PerfData] Error processing state data ["+t+"]: "+s.message)}var i,r=0,h=0;for(i in this.last){var p=parseFloat(this.last[i].val);isNaN(p)&&(p=0),r+=p,h=Math.max(h,this.last[i].state)}this.chart.update(r,h)},e});
//# sourceMappingURL=dist/Stroke-PerfData.map