define(["snmd-core/js/SVGWidget","snmd-core/js/SVGImpl/Transform","js-logger"],function(t,s,a){"use strict";var r=function(a,r,e){this.opts={desc:e,cls:t.srClassOpts(e,"Transform")},this.desc=e,this.opts.transform="undefined"==typeof this.desc.transform?"scale(%)":this.desc.transform,this.opts.keys="undefined"==typeof e.keys?[e.key]:e.keys,this.opts.factors="undefined"==typeof e.factors?[]:e.factors,"undefined"!=typeof e.factor?(this.opts.factor=parseFloat(e.factor),isNaN(this.opts.factor)&&(this.opts.factor=1)):this.opts.factor=1,"undefined"!=typeof e.max?(this.opts.max=parseFloat(e.max),isNaN(this.opts.max)&&(this.opts.max=100)):this.opts.max=100,this.last=[],this.factors=[];var o;for(o=0;o<e.topics.length;o++)this.last[e.topics[o]]=[],this.factors[e.topics[o]]="undefined"==typeof this.opts.factors[o]?this.opts.factor:this.opts.factors[o];this.chart=new s(a,r,this.opts)};return r.prototype.handleUpdate=function(t,s){var r;try{r=JSON.parse(s)}catch(e){return void a.debug("[Nagios/Transform-PerfData] JSON error in performance data: "+e.message)}this.last[t].val=0;try{var o;for(o=0;o<this.opts.keys.length;o++)"undefined"!=typeof r.perf_data[this.opts.keys[o]]&&(this.last[t].val+=parseFloat(r.perf_data[this.opts.keys[o]].val)*this.factors[t])}catch(i){a.debug("[Nagios/Transform-PerfData] Error processing performance data ["+t+"]: "+i.message)}try{this.last[t].state=r.state}catch(f){a.debug("[Nagios/Transform-PerfData] Error processing state data ["+t+"]: "+f.message)}var p,h=0,n=0;for(p in this.last){var c=parseFloat(this.last[p].val);isNaN(c)&&(c=0),h+=c,n=Math.max(n,this.last[p].state)}this.chart.update(h,n)},r});
//# sourceMappingURL=dist/js/Transform-PerfData.map