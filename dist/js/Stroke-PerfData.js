define(["snmd-core/js/SVGWidget","snmd-core/js/SVGImpl/StrokeWidth","snmd-widgets-nagios/js/Utils","js-logger"],function(t,s,a,e){"use strict";var o=function(e,o,i){this.opts={desc:i,cls:t.srClassOpts(i,"StrokeWidth")},this.desc=i,this.opts.width="undefined"==typeof this.desc.width?[1,32]:this.desc.width,this.opts.keys="undefined"==typeof i.keys?[i.key]:i.keys,this.opts.factors="undefined"==typeof i.factors?[]:i.factors,"undefined"!=typeof i.factor?(this.opts.factor=parseFloat(i.factor),isNaN(this.opts.factor)&&(this.opts.factor=1)):this.opts.factor=1,"undefined"!=typeof i.max?(this.opts.max=parseFloat(i.max),isNaN(this.opts.max)&&(this.opts.max=100)):this.opts.max=100,this.opts.scale="undefined"!=typeof i.scale?i.scale:"linear",this.opts.abs=!1,"undefined"!=typeof i.abs&&i.abs&&(this.opts.abs=!0),this.last=[],this.factors=[];var r;for(r=0;r<i.topics.length;r++)this.last[i.topics[r]]=[],this.factors[i.topics[r]]="undefined"==typeof this.opts.factors[r]?this.opts.factor:this.opts.factors[r];this.chart=new s(e,o,this.opts,a.qTipConfig(this,"Performance Data"))};return o.prototype.handleUpdate=function(t,s){var o;try{o=JSON.parse(s)}catch(i){return void e.debug("[Nagios/Stroke-PerfData] JSON error in performance data: "+i.message)}a.qTipUpdate(o,this),this.last[t].val=0;try{var r;for(r=0;r<this.opts.keys.length;r++)"undefined"!=typeof o.perf_data[this.opts.keys[r]]&&(this.last[t].val+=parseFloat(o.perf_data[this.opts.keys[r]].val)*this.factors[t])}catch(h){e.debug("[Nagios/Stroke-PerfData] Error processing performance data ["+t+"]: "+h.message)}try{this.last[t].state=o.state}catch(p){e.debug("[Nagios/Stroke-PerfData] Error processing state data ["+t+"]: "+p.message)}var f,d=0,c=0;for(f in this.last){var n=parseFloat(this.last[f].val);isNaN(n)&&(n=0),d+=n,c=Math.max(c,this.last[f].state)}this.chart.update(d,c)},o});
//# sourceMappingURL=dist/js/Stroke-PerfData.map