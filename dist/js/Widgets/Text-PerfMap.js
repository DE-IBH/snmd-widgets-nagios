define(["snmd-core/js/SVGWidget","snmd-core/js/SVGImpl/Text","snmd-widgets-nagios/js/Utils","js-logger"],function(t,s,e,a){"use strict";var i=function(a,i,p){if(this.opts={title:"Performance Data",desc:p,cls:t.srClassOpts(p,"Text")},this.desc=p,this.opts.key=p.key,void 0!==p.map?this.opts.map=p.map:this.opts.map=[],1!==p.topics.length)throw"NagTextPerfMap supports a single topic, only!";this.chart=new s(a,i,this.opts,e.qTipConfig(this,[this.opts.key]))};return i.prototype.handleUpdate=function(t,s){var i;try{i=JSON.parse(s)}catch(t){return void a.debug("[Nagios/Text-PerfMap] JSON error in performance data: "+t.message)}e.qTipUpdate(t,i,this);try{var p="?";void 0!==i.perf_data[this.opts.key]&&((p=i.perf_data[this.opts.key].val)in this.opts.map?p=this.opts.map[p]:(p="?",a.debug("[Nagios/Text-PerfMap] No mapping available ["+t+"]: "+this.opts.key+" => '"+i.perf_data[this.opts.key].val+"'"))),this.chart.update(p,i.state,!1)}catch(s){a.debug("[Nagios/Text-PerfMap] Error processing performance data ["+t+"]: "+s.message)}},i});