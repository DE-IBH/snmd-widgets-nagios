define(["snmd-core/js/SVGWidget","snmd-core/js/SVGImpl/Text","snmd-widgets-nagios/js/Utils","js-logger"],function(t,s,a,e){"use strict";var o=function(e,o,r){this.opts={desc:r,cls:t.srClassOpts(r,"Text")},this.desc=r,this.opts.uom="undefined"==typeof this.desc.uom?"":this.desc.uom,this.opts.keys="undefined"==typeof r.keys?[r.key]:r.keys,this.opts.factors="undefined"==typeof r.factors?[]:r.factors,"undefined"!=typeof r.factor?(this.opts.factor=parseFloat(r.factor),isNaN(this.opts.factor)&&(this.opts.factor=1)):this.opts.factor=1,"undefined"!=typeof r.fracts&&(this.opts.fracts=r.fracts),this.last=[],this.factors=[];var i;for(i=0;i<r.topics.length;i++)this.last[r.topics[i]]=[],this.factors[r.topics[i]]="undefined"==typeof this.opts.factors[i]?this.opts.factor:this.opts.factors[i];this.chart=new s(e,o,this.opts,a.qTipConfig(this,"Performance Data",this.opts.keys))};return o.prototype.handleUpdate=function(t,s){var o;try{o=JSON.parse(s)}catch(r){return void e.debug("[Nagios/Text-PerfData] JSON error in performance data: "+r.message)}a.qTipUpdate(o,this),this.last[t].val=0;try{var i;for(i=0;i<this.opts.keys.length;i++)"undefined"!=typeof o.perf_data[this.opts.keys[i]]&&(this.last[t].val+=parseFloat(o.perf_data[this.opts.keys[i]].val)*this.factors[t])}catch(f){e.debug("[Nagios/Text-PerfData] Error to process performance data ["+t+"]: "+f.message)}try{this.last[t].state=o.state}catch(p){e.debug("[Nagios/Text-PerfData] Error to process state data ["+t+"]: "+p.message)}var c,h=0,d=0;for(c in this.last){var n=parseFloat(this.last[c].val);isNaN(n)&&(n=0),h+=n,d=Math.max(d,this.last[c].state)}this.chart.update(h,d)},o});
//# sourceMappingURL=dist/js/Widgets/Text-PerfData.map