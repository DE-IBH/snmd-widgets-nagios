define(["snmd-core/js/SVGWidget","snmd-core/js/SVGImpl/Class","snmd-widgets-nagios/js/Utils","jquery","js-logger"],function(t,s,e,a,i){"use strict";var r=function(i,r,l){this.opts={title:"Service State",cls:t.srClassOpts(l,"Class")},this.last=[];var o;for(o=0;o<l.topics.length;o++)this.last[l.topics[o]]=[3];if(void 0!==l.clrsty)for(o=0;o<l.clrsty.length;o++)r.style[l.clrsty[o]]="",a(r).children("tspan").each(function(t,s){s.style[l.clrsty[t]]=""});this.el=new s(i,r,this.opts,e.qTipConfig(this))};return r.prototype.handleUpdate=function(t,s){var a;try{a=JSON.parse(s)}catch(t){return void i.debug("[Nagios/Class-TextState] JSON error in performance data: "+t.message)}e.qTipUpdate(t,a,this),this.last[t]=void 0;try{this.last[t]=a.state}catch(s){i.debug("[Nagios/Class-TextState] Error processing state data ["+t+"]: "+s.message)}var r,l=0;for(r in this.last)l=Math.max(l,this.last[r]);this.el.update(l)},r});