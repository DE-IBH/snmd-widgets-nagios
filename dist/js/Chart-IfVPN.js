define(["snmd-core/js/SVGWidget","snmd-core/js/SVGImpl/Chart","js-logger"],function(t,s,a){"use strict";var e=function(a,e,i){this.opts={axis:[{max:2e8,scale:"linear"}],desc:i,dpi:.2,cls:t.srClassOpts(i,"Chart"),lcls:["snmd-lcl-Nag","snmd-lcl-NagIf","snmd-lcl-NagIfVPN"],mcls:["snmd-mcl-Nag","snmd-mcl-NagIf","snmd-mcl-NagIfVPN"],tcls:["snmd-tcl-Nag","snmd-tcl-NagIf","snmd-tcl-NagIfVPN"]};var r,n,l=0;for(n=0;n<i.topics.length;n++){var c=new RegExp("Interface (.*Ethernet|POS)").exec(i.topics[n]);if(c&&c[1])switch(c[1]){case"TenGigabitEthernet":r=2e9,l=r>l?r:l;break;case"GigabitEthernet":r=2e8,l=r>l?r:l;break;case"POS":r=31e6,l=r>l?r:l;break;case"FastEthernet":r=2e7,l=r>l?r:l;break;case"Ethernet":r=2e6,l=r>l?r:l;break;default:r=this.opts.axis[0].max,l=r>l?r:l}else l+=this.opts.axis[0].max}for(this.opts.axis[0].max=l,"undefined"!=typeof i.max&&(r=parseFloat(i.max),isNaN(r)||(this.opts.axis[0].max=r)),this.lines=[{name:"if_in_octets",axis:0,unit:"b"},{name:"if_out_octets",axis:0,unit:"b"}],this.desc=i,this.last=[],n=0;n<i.topics.length;n++){this.last[i.topics[n]]=[];var h;for(h=0;h<this.lines.length;h++)this.last[i.topics[n]][h]=[]}this.chart=new s(a,e,this.opts,this.lines)};return e.prototype.handleUpdate=function(t,s){var e;try{e=JSON.parse(s)}catch(i){return void a.debug("[Nagios/Chart-IfBw] JSON error in performance data: "+i.message)}var r;for(r=0;r<this.lines.length;r++){this.last[t][r].val=0,this.last[t][r].state=0;try{this.last[t][r].val=8*e.perf_data[this.lines[r].name].val}catch(n){}try{this.last[t][r].state=e.state}catch(l){a.debug("[Nagios/Chart-IfBw] Error processing state data: "+l.message)}}var c=[],h=0;for(r=0;r<this.lines.length;r++){c[r]=0;var o;for(o in this.last){var m=parseFloat(this.last[o][r].val);isNaN(m)&&(m=0),c[r]+=m,h=Math.max(h,this.last[o][r].state)}}this.chart.update(e._timestamp,c,h)},e});
//# sourceMappingURL=dist/js/Chart-IfVPN.map