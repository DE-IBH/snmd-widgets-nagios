define(["snmd-core/js/SVGWidget","snmd-core/js/SVGImpl/Chart","snmd-widgets-nagios/js/Utils","js-logger"],function(t,s,a,e){"use strict";var i=function(e,i,r){this.opts={axis:[{max:297619.2,scale:"linear"}],desc:r,dpi:.2,cls:t.srClassOpts(r,"Chart"),lcls:["snmd-lcl-Nag","snmd-lcl-NagIf","snmd-lcl-NagIfPr"],mcls:["snmd-mcl-Nag","snmd-mcl-NagIf","snmd-mcl-NagIfPr"],tcls:["snmd-tcl-Nag","snmd-tcl-NagIf","snmd-tcl-NagIfPr"]};var n,l,c=0;for(n=0;n<r.topics.length;n++){var h=new RegExp("Interface (.*Ethernet|POS)").exec(r.topics[n]);if(h&&h[1])switch(h[1]){case"TenGigabitEthernet":l=194100,c=l>c?l:c;break;case"GigabitEthernet":l=19410,c=l>c?l:c;break;case"POS":l=31*97.05,c=l>c?l:c;break;case"FastEthernet":l=1941,c=l>c?l:c;break;case"Ethernet":l=194.1,c=l>c?l:c;break;default:l=this.opts.axis[0].max,c=l>c?l:c}else c+=this.opts.axis[0].max}for(this.opts.axis[0].max=c,"undefined"!=typeof r.max&&(l=parseFloat(r.max),isNaN(l)||(this.opts.axis[0].max=l)),this.lines=[{name:"inucast",axis:0,unit:"p"},{name:"outucast",axis:0,unit:"p"}],this.desc=r,this.last=[],n=0;n<r.topics.length;n++){this.last[r.topics[n]]=[];var o;for(o=0;o<this.lines.length;o++)this.last[r.topics[n]][o]=[]}this.chart=new s(e,i,this.opts,this.lines,a.qTipConfig(this,"Interface Packet Rate",this.lines.map(function(t){return t.name})))};return i.prototype.handleUpdate=function(t,s){var i;try{i=JSON.parse(s)}catch(r){return void e.debug("[Nagios/Chart-IfPr] JSON error in performance data: "+r.message)}a.qTipUpdate(i,this);var n;for(n=0;n<this.lines.length;n++){this.last[t][n].val=0,this.last[t][n].state=0;try{this.last[t][n].val=i.perf_data[this.lines[n].name].val}catch(l){}try{this.last[t][n].state=i.state}catch(c){e.debug("[Nagios/Chart-IfPr] Error processing state data: "+c.message)}}var h=[],o=0;for(n=0;n<this.lines.length;n++){h[n]=0;var m;for(m in this.last){var p=parseFloat(this.last[m][n].val);isNaN(p)&&(p=0),h[n]+=p,o=Math.max(o,this.last[m][n].state)}}this.chart.update(i._timestamp,h,o)},i});
//# sourceMappingURL=dist/js/Chart-IfPr.map