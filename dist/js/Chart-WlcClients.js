define(["snmd-core/js/SVGWidget","snmd-core/js/SVGImpl/Chart","js-logger"],function(s,t,a){"use strict";var e=function(a,e,l){this.opts={axis:[{max:100,scale:"linear"}],desc:l,dpi:.2,cls:s.srClassOpts(l,"Chart"),lcls:["snmd-lcl-Nag","snmd-lcl-NagWlc","snmd-lcl-NagWlcClients"],mcls:["snmd-mcl-Nag","snmd-mcl-NagWlc","snmd-mcl-NagWlcClients"],tcls:["snmd-tcl-Nag","snmd-tcl-NagWlc","snmd-tcl-NagWlcClients"]},this.lines=[{name:"connections",axis:0,unit:" STA"}],this.desc=l,this.last=[];var i;for(i=0;i<l.topics.length;i++){this.last[l.topics[i]]=[];var n;for(n=0;n<this.lines.length;n++)this.last[l.topics[i]][n]=[]}this.chart=new t(a,e,this.opts,this.lines)};return e.prototype.handleUpdate=function(s,t){var e;try{e=JSON.parse(t)}catch(l){return void a.debug("[Nagios/Chart-WlcClients] JSON error in performance data: "+l.message)}var i,n;for(i=0;i<this.lines.length;i++){this.last[s][i].val=0,this.last[s][i].state=0;try{n=parseInt(e.perf_data[this.lines[i].name].val,10),isNaN(n)||(this.last[s][i].val=n)}catch(r){a.debug("[Nagios/Chart-WlcClients] Error processing performance data of "+s+"["+i+"]: "+r.message)}try{this.last[s][i].state=e.state}catch(c){a.debug("[Nagios/Chart-WlcClients] Error processing state data: "+c.message)}}var h=[],o=0;for(i=0;i<this.lines.length;i++){h[i]=0;var d;for(d in this.last)h[i]+=this.last[d][i].val,o=Math.max(o,this.last[d][i].state)}this.chart.update(e._timestamp,h,o)},e});
//# sourceMappingURL=dist/js/Chart-WlcClients.map