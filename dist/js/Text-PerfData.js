define(["snmd-core/js/SVGWidget","snmd-core/js/SVGImpl/Text","js-logger"],function(t,s,a){"use strict";var e=function(a,e,o){this.opts={desc:o,cls:t.srClassOpts(o,"Text")},this.desc=o,this.opts.uom="undefined"==typeof this.desc.uom?"":this.desc.uom,this.opts.keys="undefined"==typeof o.keys?[o.key]:o.keys,this.opts.factors="undefined"==typeof o.factors?[]:o.factors,"undefined"!=typeof o.factor?(this.opts.factor=parseFloat(o.factor),isNaN(this.opts.factor)&&(this.opts.factor=1)):this.opts.factor=1,"undefined"!=typeof o.fracts&&(this.opts.fracts=o.fracts),this.last=[],this.factors=[];var r;for(r=0;r<o.topics.length;r++)this.last[o.topics[r]]=[],this.factors[o.topics[r]]="undefined"==typeof this.opts.factors[r]?this.opts.factor:this.opts.factors[r];this.chart=new s(a,e,this.opts)};return e.prototype.handleUpdate=function(t,s){var e;try{e=JSON.parse(s)}catch(o){return void a.debug("[Nagios/Text-PerfData] JSON error in performance data: "+o.message)}this.last[t].val=0;try{var r;for(r=0;r<this.opts.keys.length;r++)"undefined"!=typeof e.perf_data[this.opts.keys[r]]&&(this.last[t].val+=parseFloat(e.perf_data[this.opts.keys[r]].val)*this.factors[t])}catch(i){a.debug("[Nagios/Text-PerfData] Error to process performance data ["+t+"]: "+i.message)}try{this.last[t].state=e.state}catch(f){a.debug("[Nagios/Text-PerfData] Error to process state data ["+t+"]: "+f.message)}var c,p=0,h=0;for(c in this.last){var d=parseFloat(this.last[c].val);isNaN(d)&&(d=0),p+=d,h=Math.max(h,this.last[c].state)}this.chart.update(p,h)},e});
//# sourceMappingURL=dist/js/Text-PerfData.map