define(["snmd-core/js/SVGWidget","snmd-core/js/SVGImpl/Gauge","js-logger"],function(t,s,e){"use strict";var a=function(e,a,i){this.opts={axis:[{max:50,scale:"linear"}],stroke:"yellow",fill:"white",desc:i,dpi:.2,cls:t.srClassOpts(i,"Gauge")},this.desc=i,this.opts.uom="undefined"==typeof this.desc.uom?"":this.desc.uom,this.opts.keys="undefined"==typeof i.keys?[i.key]:i.keys,this.opts.factor="undefined"!=typeof i.factor?i.factor:1,this.last=[];var r;for(r=0;r<i.topics.length;r++)this.last[i.topics[r]]=[];this.max="undefined"==typeof i.max?100:i.max,this.chart=new s(e,a,this.opts)};return a.prototype.handleUpdate=function(t,s){var a;try{a=JSON.parse(s)}catch(i){return void e.debug("[Nagios/Gauge-PerfData] JSON error in performance data: "+i.message)}this.last[t].val=0,this.last[t].state=0;try{var r;for(r=0;r<this.opts.keys.length;r++)"undefined"!=typeof a.perf_data[this.opts.keys[r]]&&(this.last[t].val+=parseFloat(a.perf_data[this.opts.keys[r]].val));this.last[t].state=a.state}catch(o){e.debug("[Nagios/Gauge-PerfData] Error processing performance data: "+o.message)}var h,n=0,p=0;for(h in this.last){var d=parseFloat(this.last[h].val);isNaN(d)&&(d=0),n+=d,p=Math.max(p,this.last[h].state)}this.chart.update(n*this.opts.factor,this.max,p)},a});
//# sourceMappingURL=dist/js/Gauge-PerfData.map