define(["snmd-core/js/SVGWidget","snmd-core/js/SVGImpl/Chart","snmd-widgets-nagios/js/Utils","js-logger"],function(s,t,a,i){"use strict";var e=function(i,e,l){this.opts={axis:[{max:.01,scale:"linear"}],fill:"white",desc:l,dpi:.2,cls:s.srClassOpts(l,"Chart"),lcls:["snmd-lcl-Nag","snmd-lcl-NagDisk","snmd-lcl-NagDiskWait"],mcls:["snmd-mcl-Nag","snmd-mcl-NagDisk","snmd-mcl-NagDiskWait"],tcls:["snmd-tcl-Nag","snmd-tcl-NagDisk","snmd-tcl-NagDiskWait"]},this.lines=[{name:"disk_average_read_wait",axis:0,unit:"s"},{name:"disk_average_write_wait",axis:0,unit:"s"}],this.desc=l,this.last=[];var r;for(r=0;r<l.topics.length;r++){this.last[l.topics[r]]=[];var n;for(n=0;n<this.lines.length;n++)this.last[l.topics[r]][n]=[]}this.chart=new t(i,e,this.opts,this.lines,a.qTipConfig("Disk Wait",this))};return e.prototype.handleUpdate=function(s,t){var e;try{e=JSON.parse(t)}catch(l){return void i.debug("[Nagios/Chart-DiskWait] JSON error in performance data: "+l.message)}a.qTipUpdate(e,this);var r;for(r=0;r<this.lines.length;r++){this.last[s][r].val=0,this.last[s][r].state=0;try{this.last[s][r].val=e.perf_data[this.lines[r].name].val,this.last[s][r].state=e.state}catch(n){i.debug("[Nagios/Chart-DiskWait] Error processing performance data of "+this.lines[r].name+": "+n.message)}}var h=[],c=0;for(r=0;r<this.lines.length;r++){h[r]=0;var d;for(d in this.last){var o=parseFloat(this.last[d][r].val);isNaN(o)&&(o=0),h[r]+=o,c=Math.max(c,this.last[d][r].state)}}this.chart.update(e._timestamp,h,c)},e});
//# sourceMappingURL=dist/js/Chart-DiskWait.map