define(["snmd-core/SVGWidget","snmd-core/SVGImpl/Gauge"],function(t,s){"use strict";var e=function(e,a,o){this.opts={axis:[{max:50,scale:"linear"}],stroke:"yellow",fill:"white",desc:o,dpi:.2,cls:t.srClassOpts(o,"Gauge")},this.desc=o,"undefined"==typeof this.desc.uom?this.opts.uom="":this.opts.uom=this.desc.uom,"undefined"==typeof o.keys?this.opts.keys=[o.key]:this.opts.keys=o.keys,"undefined"!=typeof o.factor?this.opts.factor=o.factor:this.opts.factor=1,this.last=[];var i;for(i=0;i<o.topics.length;i++)this.last[o.topics[i]]=[];this.max="undefined"==typeof o.max?100:o.max,this.chart=new s(e,a,this.opts)};return e.prototype.handleUpdate=function(t,s){var e;try{e=JSON.parse(s)}catch(t){return void console.error("JSON error in performance data: "+t.message)}this.last[t].val=0,this.last[t].state=0;try{var a;for(a=0;a<this.opts.keys.length;a++)"undefined"!=typeof e.perf_data[this.opts.keys[a]]&&(this.last[t].val+=parseFloat(e.perf_data[this.opts.keys[a]].val));this.last[t].state=e.state}catch(t){console.warn("Error to process performance data: "+t.message)}var o,i=0,r=0;for(o in this.last){var h=parseFloat(this.last[o].val);isNaN(h)&&(h=0),i+=h,r=Math.max(r,this.last[o].state)}this.chart.update(i*this.opts.factor,this.max,r)},e});
//# sourceMappingURL=dist/Gauge-PerfData.min.map